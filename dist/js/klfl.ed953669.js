(function(t){function e(e){for(var a,n,o=e[0],c=e[1],l=e[2],u=0,p=[];u<o.length;u++)n=o[u],s[n]&&p.push(s[n][0]),s[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],a=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(a=!1)}a&&(r.splice(e--,1),t=n(n.s=i[0]))}return t}var a={},s={klfl:0},r=[];function n(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=a,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="../../";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;r.push(["108e","chunk-vendors","chunk-common"]),i()})({"108e":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var a=i("8bbf"),s=i.n(a),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"luckMoney_container",style:{backgroundImage:"url("+t.pageStyle.bodyBgImgUrl+")"}},[i("div",{staticClass:"luckMoney_tips"},[i("div",{staticClass:"luckMoney_rules",style:{color:t.pageStyle.ruleBtnTextColor},on:{click:function(e){t.showRule=!0}}},[t._v("\n      活动规则\n      "),i("i",{staticClass:"icon iconfont icon-arrow_right"})])]),i("div",{staticClass:"luckMoney_tips"},[i("div",{staticClass:"luckMoney_winningRecord",style:{color:t.pageStyle.recordBtnTextColor},on:{click:function(e){return t.getRecordList()}}},[t._v("\n      中奖记录\n      "),i("i",{staticClass:"icon iconfont icon-arrow_right"})])]),i("div",{staticClass:"luckMoney_form"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"luckMoney_input",attrs:{type:"text",placeholder:"请输入口令"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),i("div",{staticClass:"luckMoney_sendBtn",style:{backgroundImage:"url("+t.pageStyle.submitBtnImgUrl+")"},on:{click:t.luckyDraw}}),t.pageStyle.tipUrl.length>0?i("div",{staticClass:"luckMoney_orderTips"},[i("a",{style:{color:t.pageStyle.tipBtnTextColor},attrs:{href:t.pageStyle.tipUrl}},[i("i",{staticClass:"icon iconfont icon-tishi"}),t._v("口令提示\n      ")])]):t._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showToast,expression:"showToast"}],class:["luckMoney_toast",{luckMoney_redToast:2===t.errorTipType}]},[t._v("\n    "+t._s(t.toastMsg)+"\n  ")]),i("game-rule",{attrs:{"game-introduction":t.gameIntroduction,"show-rule":t.showRule},on:{"update:showRule":function(e){t.showRule=e},"update:show-rule":function(e){t.showRule=e}}}),i("record-list",{attrs:{"record-list-data":t.recordList,"show-record-list":t.showRecordList,authStatus:t.member.authStatus},on:{getPrizeInfo:t.getPrizeInfo,getCardExt:t.getCardExt,toMemberAddressList:t.toMemberAddressList,logistics:t.logistics,loadMore:t.loadMore,close:t.closeRecordList}}),i("prize-info",{attrs:{prize:t.prizeData,"show-prize":t.showPrize,brandName:t.brandName,authStatus:t.authStatus},on:{"update:showPrize":function(e){t.showPrize=e},"update:show-prize":function(e){t.showPrize=e},toMemberAddressList:t.toMemberAddressList,toAuth:t.toAuth,getCardExt:t.getCardExt}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showGameTip,expression:"showGameTip"}],staticClass:"luckMoney_msgboxAll"},[i("div",{staticClass:"luckMoney_mask",on:{click:function(e){t.showGameTip=!1}}}),i("div",{staticClass:"luckMoney_msgbox"},[i("div",{staticClass:"luckMoney_msgbox_content"},[i("div",{staticClass:"luckMoney_msgbox_message",domProps:{innerHTML:t._s(t.gameTipMsg)}}),i("button",{staticClass:"luckMoney_msgbox_btn",on:{click:function(e){t.showGameTip=!1}}},[t._v("知道了")])])])]),i("partake-sill",{attrs:{showPartake:t.partakeSill.showPartake,imgUrl:t.partakeSill.imgUrl,msg:t.partakeSill.msg,gameName:"klfl"},on:{"update:showPartake":function(e){return t.$set(t.partakeSill,"showPartake",e)},"update:show-partake":function(e){return t.$set(t.partakeSill,"showPartake",e)}}})],1)},n=[],o=i("cebc"),c=i("75fc"),l=(i("82d9"),i("3a10"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.showRecordList,expression:"showRecordList"}],staticClass:"winningRecord_box"},[i("div",{staticClass:"winningRecord_header"},[i("p",{staticClass:"winningRecord_header__title"},[t._v("\r\n      中奖记录\r\n      "),i("i",{staticClass:"icon iconfont icon-guanbi",on:{click:t.handleClose}})])]),t._m(0),i("swiper",{staticStyle:{height:"calc(100% - 2.6rem)"},attrs:{options:t.swiperOption}},[i("swiper-slide",{staticStyle:{height:"auto"}},t._l(t.recordListData,function(e){return i("div",{key:e.enterpriseId,staticClass:"record-item"},[1===e.prizeReferType?[i("div",{staticClass:"winningRecord_pointPic"}),i("p",{staticClass:"winningRecord_name"},[t._v(t._s(e.prizeIntegral)+"积分")]),i("div",{staticClass:"winningRecord_state"},[i("span",{class:1===e.status?"winningRecord_state__unclaimed":"winningRecord_state__claimed",on:{click:function(i){return t.getPrize(e)}}},[t._v("\r\n            已领取\r\n          ")])])]:t._e(),2===e.prizeReferType?[i("div",{staticClass:"winningRecord_vouchersPic"}),i("p",{staticClass:"winningRecord_name"},[t._v(t._s(e.cardName))]),i("div",{staticClass:"winningRecord_state"},[i("span",{class:1===e.status?"winningRecord_state__unclaimed":"winningRecord_state__claimed",on:{click:function(i){return t.getPrize(e)}}},[t._v("\r\n            "+t._s(1===e.status?"立即领取":"已领取")+"\r\n          ")])])]:t._e(),3===e.prizeReferType?[i("div",{staticClass:"winningRecord_giftPic",style:{backgroundImage:"url("+e.giftImgUrl+")"}}),i("p",{staticClass:"winningRecord_name"},[t._v(t._s(e.giftName))]),i("div",{staticClass:"winningRecord_state"},[4===e.status?[i("span",{staticClass:"winningRecord_state__claimed",staticStyle:{"line-height":"0.2rem"}},[t._v("\r\n              "+t._s(t.getBtnText(e.status))+"\r\n            ")]),i("span",{staticClass:"winningRecord_state__logistics",staticStyle:{"line-height":"1.4rem"},on:{click:function(i){return t.logistics(e)}}},[t._v("\r\n              查看物流\r\n            ")])]:[i("span",{class:1===e.status||2===e.status?"winningRecord_state__unclaimed":"winningRecord_state__claimed",on:{click:function(i){return t.getPrize(e)}}},[t._v("\r\n              "+t._s(t.getBtnText(e.status))+"\r\n            ")])]],2)]:t._e()],2)}),0)],1)],1)}),d=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"winningRecord_list__title"},[i("p",[t._v("奖品")]),i("p",[t._v("领取记录")])])}],u=(i("c5f6"),i("dfa4"),i("7212")),p={name:"record-list",props:{recordListData:Array,showRecordList:Boolean,authStatus:Number},data:function(){var t=this;return{swiperOption:{direction:"vertical",slidesPerView:"auto",freeMode:!0,mousewheel:!0,on:{transitionEnd:function(){this.isEnd&&t.$emit("loadMore")}}}}},components:{swiper:u["swiper"],swiperSlide:u["swiperSlide"]},computed:{swiper:function(){return this.$refs.mySwiper.swiper}},methods:{getBtnText:function(t){var e=["立即领取","填写收货地址","待发货","已发货"];return e[t-1]},handleClose:function(){this.$emit("close")},getPrize:function(t){t.prizeReferType;var e=t.wechatCardId,i=t.cardLogId,a=t.gameActivityWinRecordId;3===t.prizeReferType&&this.$emit("toMemberAddressList",a),1===t.status&&(1===this.authStatus?(t.status=2,this.$emit("getCardExt",{wechatCardId:e,cardLogId:i,gameActivityWinRecordId:a})):this.$emit("getPrizeInfo",a))},logistics:function(t){var e=t.gameActivityWinRecordId,i=t.prizeReferId;this.$emit("logistics",{gameActivityWinRecordId:e,prizeReferId:i})}}},g=p,h=i("2877"),m=Object(h["a"])(g,l,d,!1,null,null,null),v=m.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.showRule,expression:"showRule"}],staticClass:"luckMoney_RuleModal"},[i("div",{staticClass:"luckMoney_mask",on:{click:t.handleClose}}),i("div",{staticClass:"ruleModal-container"},[i("div",{staticClass:"ruleModal-containerHeader"},[i("p",[t._v("活动规则")]),i("div",{on:{click:t.handleClose}},[i("i",{staticClass:"icon iconfont icon-close"})])]),i("div",{staticClass:"ruleModal-containerContent"},[i("p",[t._v(t._s(t.gameIntroduction))])])])])},_=[],w={name:"game-rule",props:{gameIntroduction:String,showRule:Boolean},methods:{handleClose:function(){this.showRule=!1,this.$emit("update:showRule",!1)}}},b=w,y=Object(h["a"])(b,f,_,!1,null,null,null),C=y.exports,k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.showPrize,expression:"showPrize"}],staticClass:"dialog_box"},[i("div",{staticClass:"luckMoney_mask"}),i("div",{staticClass:"dialog-container"},[1===t.prize.prizeReferType?[i("p",{staticClass:"dialog-title"},[t._v("恭喜你，抢到"+t._s(t.prize.prizeIntegral)+"积分")]),i("div",{staticClass:"pointPic"},[i("span",{staticClass:"voucherText"},[t._v(t._s(t.prize.prizeIntegral))])]),t._m(0),i("div",{staticClass:"dialog-footer"},[t.authStatus?[i("div",{staticClass:"dialog-btn dialog-btn_right",on:{click:t.handleClose}},[t._v("知道了")])]:[i("div",{staticClass:"dialog-btn dialog-btn_left",on:{click:t.handleClose}},[t._v("知道了")]),i("div",{staticClass:"dialog-btn dialog-btn_right",on:{click:t.toAuth}},[t._v("立即开卡")])]],2)]:t._e(),2===t.prize.prizeReferType?[i("p",{staticClass:"dialog-title"},[t._v("恭喜你，抢到1张"+t._s(t.getCardTypeName()))]),i("div",{staticClass:"vouchersPic"},[t._v("\n        "+t._s(t.prize.prizeName.replace(/^(.{8})(.*)/,"$1..."))+"\n        "),i("span",{staticClass:"voucherText"})]),i("div",{staticClass:"dialog-tips"},[t.authStatus?[i("p",[t._v("奖励已发放至您的会员账户")]),t._m(1)]:[i("p",[t._v("您还不是"+t._s(t.brandName)+"的会员")]),t._m(2)]],2),i("div",{staticClass:"dialog-footer"},[t.authStatus?[i("div",{staticClass:"dialog-btn dialog-btn_right",on:{click:t.getCardExt}},[t._v("立即领取")])]:[i("div",{staticClass:"dialog-btn dialog-btn_left",on:{click:t.handleClose}},[t._v("放弃领券")]),i("div",{staticClass:"dialog-btn dialog-btn_right",on:{click:t.toAuth}},[t._v("立即开卡")])]],2)]:t._e(),3===t.prize.prizeReferType?[i("p",{staticClass:"dialog-title"},[t._v("恭喜你，抢到"+t._s(t.prize.prizeName))]),i("div",{staticClass:"giftPic",style:{backgroundImage:"url("+t.prize.imageUrl+")"}},[i("span",{staticClass:"voucherText"})]),i("div",{staticClass:"dialog-tips"},[t.authStatus?[i("p",[t._v("奖励已发放")]),t._m(3)]:[i("p",[t._v("您还不是"+t._s(t.brandName)+"的会员")]),i("a",{attrs:{href:"javascript:;"}},[t._v("请先开卡后领取")])]],2),i("div",{staticClass:"dialog-footer"},[t.authStatus?[i("div",{staticClass:"dialog-btn dialog-btn_left",on:{click:t.handleClose}},[t._v("放弃礼品")]),i("div",{staticClass:"dialog-btn dialog-btn_right",on:{click:t.toMemberAddressList}},[t._v("填写收货地址")])]:[i("div",{staticClass:"dialog-btn dialog-btn_left",on:{click:t.handleClose}},[t._v("放弃礼品")]),i("div",{staticClass:"dialog-btn dialog-btn_right",on:{click:t.toAuth}},[t._v("立即开卡")])]],2)]:t._e()],2)])},I=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-tips"},[i("p",[t._v("奖励已发放至您的会员账户")]),i("p",[t._v("请至"),i("a",{attrs:{href:"javascript:;"}},[t._v("积分服务")]),t._v("查看")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("请至"),i("a",{attrs:{href:"javascript:;"}},[t._v("会员中心")]),t._v("查看")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[i("a",{attrs:{href:"javascript:;"}},[t._v("请先开卡后领取")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("请至"),i("a",{attrs:{href:"javascript:;"}},[t._v("中奖记录")]),t._v("查看")])}],R={name:"prize-info",props:{prize:Object,showPrize:Boolean,brandName:String,authStatus:Number},methods:{getCardTypeName:function(){var t=["抵金券","折扣券","兑换券"];return t[this.prize.cardType]},handleClose:function(){this.showPrize=!1,this.$emit("update:showPrize",!1)},toAuth:function(){this.$emit("toAuth",this.prize.gameActivityId)},toMemberAddressList:function(){this.$emit("toMemberAddressList",this.prize.gameActivityId)},getCardExt:function(){var t=this.prize,e=t.wechatCardId,i=t.cardLogId,a=t.gameActivityWinRecordId;this.$emit("getCardExt",{wechatCardId:e,cardLogId:i,gameActivityWinRecordId:a})}}},T=R,S=Object(h["a"])(T,k,I,!1,null,"12f9c763",null),z=S.exports,x=i("5c65"),P=i("0faa"),M=i("ed08"),j=i("365c"),O="/gicfwh",L=function(t){return Object(j["b"])("".concat(O,"/game-wx-info"),t)},A=function(t){return Object(j["b"])("".concat(O,"/load_game_win_record_list"),t)},B=function(t){return Object(j["b"])("".concat(O,"/get_card_ext"),t)},N=function(t){return Object(j["b"])("".concat(O,"/get_prize_info"),t)},$=function(t){return Object(j["b"])("".concat(O,"/update_game_win_record_status"),t)},E=function(t){return Object(j["b"])("".concat(O,"/verify_game_password"),t)},U=function(t){return Object(j["b"])("".concat(O,"/check-game-play-permission"),t)},W={name:"klfl",components:{RecordList:v,GameRule:C,PrizeInfo:z,PartakeSill:x["a"]},data:function(){return{pageStyle:{bodyBgImgUrl:"",submitBtnImgUrl:"",ruleBtnTextColor:"",recordBtnTextColor:"",tipBtnTextColor:"",tipUrl:""},partakeSill:{canPlay:!1,showPartake:!1,imgUrl:"",msg:""},password:"",isPending:!1,showToast:!1,toastMsg:"",errorTipType:1,showRule:!1,gameIntroduction:"",showGameTip:!1,gameTipMsg:"",showPrize:!1,prizeData:{},brandName:"",gameActivityId:"",showRecordList:!1,recordList:[],member:{authStatus:0},authStatus:0,pageSize:50,currentPage:1}},methods:{checkPermission:function(){var t=this,e={activityId:Object(M["b"])("activityId"),memberId:Object(M["b"])("memberId")};U(e).then(function(e){"ok"===e.result.res?t.partakeSill.canPlay=!0:(t.partakeSill.showPartake=!0,t.partakeSill.canPlay=!1)})},luckyDraw:function(){var t=this,e={gamePassword:this.password,gameActivityId:this.gameActivityId,memberId:Object(M["b"])("memberId")};!this.partakeSill.canPlay&&this.partakeSill.msg.length>0?this.partakeSill.showPartake=!0:this.isPending||(this.isPending=!0,E(e).then(function(e){var i=e.returnMap.verifyCodeResInfo,a=i.errcode,s=i.errmsg,r=i.gameBeginDate;if(t.isPending=!1,0===a)return t.prizeData=e.returnMap.verifyCodeResInfo,t.brandName=e.returnMap.brandName,t.authStatus=e.returnMap.authStatus||0,void(t.showPrize=!0);switch(a){case 1004:t.showGameTipBox("游戏将在".concat(r,"开始<br/>请耐心等待哦!"));break;case 1005:t.showGameTipBox("哎呀，游戏已经结束了!");break;default:t.showToastBox(s);break}}))},getWxInfo:function(){var t=this,e={activityId:Object(M["b"])("activityId"),memberId:Object(M["b"])("memberId")};L(e).then(function(e){if(0===e.errorCode){var a=e.result,s=a.gameActivityDTO,r=a.gameWinRecordId,n=a.addressStatus,o=a.title,c=s.buttonImgUrl,l=s.backgroudImgUrl,d=s.gameIntroduction,u=s.gameActivityId,p=s.shareSetting,g=s.shareLink,h=s.shareFlag,m=s.activityCustom,v=m.gameRuleTitleFontColor,f=m.winRecordTitleFontColor,_=m.tipFontColor,w=m.tipUrl,b=m.errorTipType,y=e.result.attendCondition?e.result.attendCondition:{},C=y.tipImageUrl,k=y.tipTitle;t.pageStyle.submitBtnImgUrl=c||i("21b6"),t.pageStyle.bodyBgImgUrl=l||i("1b17"),t.pageStyle.ruleBtnTextColor=v,t.pageStyle.recordBtnTextColor=f,t.pageStyle.tipBtnTextColor=_||"#333",t.pageStyle.tipUrl=w,t.errorTipType=b,t.gameIntroduction=d,t.gameActivityId=u,Object(M["d"])(o),t.partakeSill.msg=k,t.partakeSill.imgUrl=C,t.checkPermission(),r&&n&&1===n&&t.showGameTipBox("礼品等待发货<br/>可至中奖记录查看礼品状态"),h?Object(P["b"])(Object(M["b"])("memberId"),p,g,"klfl"):Object(P["a"])(Object(M["b"])("memberId"))}})},getRecordList:function(){var t=this,e={gameActivityId:Object(M["b"])("activityId"),memberId:Object(M["b"])("memberId"),pageSize:this.pageSize,currentPage:this.currentPage};A(e).then(function(e){if(0===e.errorCode){var i,a=e.result.result||[],s=e.returnMap||{};a=a.map(function(t){return 3===t.prizeReferType&&(t.status=2),t}),(i=t.recordList).splice.apply(i,[t.recordList.length,1].concat(Object(c["a"])(a))),t.member=Object(o["a"])({},{authStatus:0},s.member)}t.showRecordList=!0})},getPrizeInfo:function(t){var e=this;N({winRecordId:t}).then(function(t){e.prizeData=t.result,e.brandName=t.returnMap.brandName,e.authStatus=t.returnMap.authStatus||0,e.showPrize=!0})},getCardExt:function(t){var e=t.wechatCardId,i=t.cardLogId,a=t.gameActivityWinRecordId;B({wechatCardId:e,cardLogId:i,memberId:Object(M["b"])("memberId")}).then(function(t){0===t.errorCode&&wx.addCard({cardList:[{cardId:e,cardExt:t.message}],success:function(){this.showPrize=!1,this.showRecordList=!1,$({winRecordId:a,status:2})}})})},toMemberAddressList:function(t){window.location.href="".concat(window.location.origin,"/gicfwh/member-address-list?gameWinRecordId=").concat(t,"}")},logistics:function(t){window.location.href="".concat(window.location.origin,"/gicfwh/show_gift_logistics_details?winRecordId=").concat(t.gameActivityWinRecordId,"&prizeReferId=").concat(t.prizeReferId)},toAuth:function(t){window.location.href="".concat(window.location.origin,"/gicfwh/to_auth_page?activityId=").concat(t,"&gicRedirect=true")},showToastBox:function(t,e){var i=this;this.toastMsg=t,this.errorTipType=e||1,this.showToast=!0,setTimeout(function(){i.showToast=!1},3e3)},showGameTipBox:function(t){this.gameTipMsg=t,this.showGameTip=!0},loadMore:function(){this.currentPage=this.currentPage+1,this.getRecordList()},closeRecordList:function(){this.showRecordList=!1,this.recordList.splice(0),this.currentPage=1}},mounted:function(){Object(M["a"])()&&this.getWxInfo()}},G=W,D=Object(h["a"])(G,r,n,!1,null,null,null),F=D.exports;s.a.config.productionTip=!1,s.a.prototype.axios=j["a"],s.a.prototype.axios.withCredentials=!0,new s.a({render:function(t){return t(F)}}).$mount("#app")},"1b17":function(t,e,i){t.exports=i.p+"img/page-bg.0fc6188e.jpg"},"21b6":function(t,e,i){t.exports=i.p+"img/page-btn.005b3b7b.png"},"3a10":function(t,e,i){},"82d9":function(t,e,i){},"8bbf":function(t,e){t.exports=Vue}});
//# sourceMappingURL=klfl.ed953669.js.map